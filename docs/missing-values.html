<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Missing values | Covid 19 Project</title>
  <meta name="description" content="Chapter 4 Missing values | Covid 19 Project" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Missing values | Covid 19 Project" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Missing values | Covid 19 Project" />
  
  
  

<meta name="author" content="Ruize Yu, Jiazhen Li, Wenxin Zhang" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-transformation.html"/>
<link rel="next" href="results.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">US Covid</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#vaccination-data"><i class="fa fa-check"></i><b>2.1</b> Vaccination data</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#covid-19-reported-patient-impact-and-hospital-capa"><i class="fa fa-check"></i><b>2.2</b> COVID-19-Reported-Patient-Impact-and-Hospital-Capa</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#united-states-covid-19-cases-and-deaths-by-state"><i class="fa fa-check"></i><b>2.3</b> United-States-COVID-19-Cases-and-Deaths-by-State</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#life-expectancy-data"><i class="fa fa-check"></i><b>2.4</b> Life expectancy data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#vaccination-case-and-death-data"><i class="fa fa-check"></i><b>3.1</b> Vaccination, case, and death data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#relationship-between-morbidity-and-mortality-and-hospital-capacity"><i class="fa fa-check"></i><b>3.2</b> Relationship between morbidity and mortality and hospital capacity</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-transformation.html"><a href="data-transformation.html#covid-19_hospital_capacity"><i class="fa fa-check"></i><b>3.2.1</b> COVID-19_Hospital_Capacity</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-transformation.html"><a href="data-transformation.html#covid-19_case_death"><i class="fa fa-check"></i><b>3.2.2</b> COVID-19_Case_Death</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-transformation.html"><a href="data-transformation.html#merge"><i class="fa fa-check"></i><b>3.2.3</b> Merge</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#us-vaccination"><i class="fa fa-check"></i><b>4.1</b> US vaccination</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="missing-values.html"><a href="missing-values.html#dataframe-after-data-cleaning"><i class="fa fa-check"></i><b>4.1.1</b> Dataframe after data cleaning</a></li>
<li class="chapter" data-level="4.1.2" data-path="missing-values.html"><a href="missing-values.html#missing-value-counts-by-column"><i class="fa fa-check"></i><b>4.1.2</b> Missing value counts by column</a></li>
<li class="chapter" data-level="4.1.3" data-path="missing-values.html"><a href="missing-values.html#missing-value-counts-by-row"><i class="fa fa-check"></i><b>4.1.3</b> Missing value counts by row</a></li>
<li class="chapter" data-level="4.1.4" data-path="missing-values.html"><a href="missing-values.html#heatmap"><i class="fa fa-check"></i><b>4.1.4</b> Heatmap</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#covid-19_hospital_capacity-1"><i class="fa fa-check"></i><b>4.2</b> COVID-19_Hospital_Capacity</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#covid-19_case_death-1"><i class="fa fa-check"></i><b>4.3</b> COVID-19_Case_Death</a></li>
<li class="chapter" data-level="4.4" data-path="missing-values.html"><a href="missing-values.html#life-expectancy-data-1"><i class="fa fa-check"></i><b>4.4</b> Life Expectancy Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#impact-of-the-vaccination-on-the-spread-of-the-epidemic"><i class="fa fa-check"></i><b>5.1</b> Impact of the vaccination on the spread of the epidemic</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#impact-of-the-hospital-capacity-and-inpatient-rate-on-the-death-rate"><i class="fa fa-check"></i><b>5.2</b> Impact of the hospital capacity and inpatient rate on the death rate</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#impact-of-covid-on-life-expectancy"><i class="fa fa-check"></i><b>5.3</b> Impact of COVID on life expectancy</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a>
<ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#top-5-series-states"><i class="fa fa-check"></i><b>6.1</b> Top 5 series states</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Covid 19 Project</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="missing-values" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Missing values</h1>
<div id="us-vaccination" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> US vaccination</h2>
<div id="dataframe-after-data-cleaning" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Dataframe after data cleaning</h3>
<pre><code>## # A tibble: 6 x 14
##   date       location  total_vaccinatio~ total_distributed people_vaccinat~ people_fully_vac~ total_vaccinatio~ people_fully_va~ people_vaccinate~ distributed_per~ daily_vaccinati~ daily_vaccinati~
##   &lt;date&gt;     &lt;chr&gt;                 &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1 2020-12-20 United S~            556208                NA               NA                NA              0.17               NA                NA               NA               NA               NA
## 2 2020-12-21 United S~            614117                NA               NA                NA              0.18               NA                NA               NA            57909            57909
## 3 2020-12-22 United S~                NA                NA               NA                NA             NA                  NA                NA               NA               NA           127432
## 4 2020-12-23 United S~           1008025                NA               NA                NA              0.3                NA                NA               NA               NA           150606
## 5 2020-12-24 United S~                NA                NA               NA                NA             NA                  NA                NA               NA               NA           191001
## 6 2020-12-25 United S~                NA                NA               NA                NA             NA                  NA                NA               NA               NA           215238
## # ... with 2 more variables: daily_vaccinations_per_million &lt;dbl&gt;, share_doses_used &lt;dbl&gt;</code></pre>
<p>The original dataframe contain vaccination information of all states and some organizations of United States. We extracted whole country data and we can see that each row represents a day from 2020-12-20 to now. The information is updated everyday. There are lots of missing values in the table and we are going to use different methods to visualize it.</p>
</div>
<div id="missing-value-counts-by-column" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> Missing value counts by column</h3>
<pre><code>##                                     num_missing
## daily_vaccinations_raw                       50
## people_fully_vaccinated_per_hundred          45
## people_fully_vaccinated                      45
## total_distributed                            44
## people_vaccinated                            44
## people_vaccinated_per_hundred                44
## distributed_per_hundred                      44
## share_doses_used                             44
## total_vaccinations                           31
## total_vaccinations_per_hundred               31
## daily_vaccinations                            1
## daily_vaccinations_per_million                1
## date                                          0
## location                                      0</code></pre>
<p>This is the missing value counts by different features. According to this table, we can see that the feature
“daily_vaccinations_raw” has the largest number of missing values. And for some features, they have similar number of missing values. Such as “people_fully_vaccinated_per_hundred” and “people_fully_vaccinated”, both of them have number of missing values equal to 35, also, according the the features’ names, it can be guessed that there is a correlation between this two value, which may be the number of missing value in “people_fully_vaccinated_per_hundred” is dependent on the feature “people_fully_vaccinated”, so they always have the missing value at the same time.</p>
</div>
<div id="missing-value-counts-by-row" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Missing value counts by row</h3>
<pre><code>## # A tibble: 9 x 2
##   date    num_missing
## * &lt;chr&gt;         &lt;dbl&gt;
## 1 2020-12         109
## 2 2021-01         125
## 3 2021-02          11
## 4 2021-05          10
## 5 2021-06           1
## 6 2021-07          11
## 7 2021-09          32
## 8 2021-10          42
## 9 2021-11          83</code></pre>
<p>Each row in the original dataframe represents a specific day. However, there are too many rows that have missing values. Therefore, we count missing values by month.</p>
<p>December 2020 and January 2021 have the greatest number of missing values. This is reasonable as vaccination just started and it’s hard to get all data well-organized.</p>
</div>
<div id="heatmap" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> Heatmap</h3>
<p><img src="finalproj_files/figure-html/unnamed-chunk-22-1.png" width="960" /></p>
<p>In order to see the missing patterns we have for this dataframe, we can use heatmap. It can be observed that rows that have missing values all at once by using this heatmap. However, since there are 330 rows in the us_whole_vaccination dataframe, it is hard to summarize the missing value patterns without showing the whole graph. Moreover, as looking through the graph, several rows have the similar missing value patterns. So instead of showing the heatmap for each row, plot just show the different missing value patterns for the dataset is prefered.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-23-1.png" width="960" /></p>
<p>This missing value plot is a combination of all the information above. It consists of three plots.</p>
<p>The main plot is the heatmap on the bottom left. It summarized different missing value patterns among all rows. The blue block in each column represents there are missing values in this column. According to the main plot, it shows that there are 7 different patterns for us_whole_vaccination dataset, which are represented by each row of the heatmap. The first row in the heatmap represents the complete cases, which means there is no missing value for rows in this pattern. By looking through this plot, there is a correlation between some features as mentioned in 4.2. For example, for features “people_fully_vaccinated_per_hundred” and “people_fully_vaccinated”, in each pattern, their missing value always occurred in the same time. Similar for features “total_distributed, people_vaccinated, people_vaccinated_per_hundred, distributed_per_hundred, and share_doses_used”, “daily_vaccinations and daily_vaccinations_per_million”, and “total_vaccinations and total_vaccinations_per_hundred”. It indicates that for some of these features, it maybe reasonable to only keep one feature from each group. For example, keep “people_fully_vaccinated” and remove “people_fully_vaccinated_per_hundred”.</p>
<p>The barplot on the right is the row count plot. It tells us the number of rows that each pattern can apply. It shows that the complete cases pattern has the most largest number of rows. From this plot, it shows that pattern 2 has the largest number of rows with missing data. By checking with this pattern, it contains 10 features that are missing. A reasonable guess is that the most of data for this pattern comes from December 2020 and January 2021. Crossing checking with the heatmap for each row in 4.4, this guess is confirmed.</p>
<p>The barplot on the top is a visualization of 4.2. It shows how many rows contain missing values of different features.</p>
<p>As there are not many missing rows, we might remove missing patter 2, 4, 5, and 7 as over 50% of the features are missing. For pattern 3 and 6, we can use mean or median to fill the missing values.</p>
</div>
</div>
<div id="covid-19_hospital_capacity-1" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> COVID-19_Hospital_Capacity</h2>
<p>In order to see if there is any state has large number of missing values, missing table was built based on the data set before transformation. Below is the first five rows of the missing-value table. It counts the number of missing value in each feature for each state. According to the table, it indicates that there is no state that has more than half of its records are missing value. Therefore, for total_beds, total_icu_beds, aud_conf and ped_conf, choose the average value of these features in each state to replace the missing value.</p>
<pre><code>##   state hospital_pk colle_week total_beds adu_conf ped_conf total_icu_beds     n
## 1    AK           0          0          0        5        5             17  1010
## 2    AL           0          0          1       15       16              2  6866
## 3    AR           0          0          0       25       25             30  6003
## 4    AS           0          0          0        0        0              0    16
## 5    AZ           0          0         10       33       93             89  5240
## 6    CA           0          0          0       41       74              8 25107</code></pre>
</div>
<div id="covid-19_case_death-1" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> COVID-19_Case_Death</h2>
<p>This is the missing value counts by different features for COVID-19_Case_Death data-set. According to this table, we can see that there is no missing value for this data-set.</p>
<pre><code>##                 num_missing
## state                     0
## submission_date           0
## tot_cases                 0
## tot_death                 0
## population                0</code></pre>
</div>
<div id="life-expectancy-data-1" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Life Expectancy Data</h2>
<pre><code>##                iso_code               continent                location                    date             total_cases               new_cases total_cases_per_million   new_cases_per_million 
##                       0                    8812                       0                       0                    7688                    7693                    8358                    8363 
##         life_expectancy 
##                    9728</code></pre>
<p>We only select 9 features and these selected features including continent, location, date iso_code, total_cases, new_cases, total_cases_per_million, new_cases_per_million and life_expectancy. This is the missing value counts by different features. We use map_db() to solve these missing value problem and after we find them and count their number, we omit them by omit() and get a new dataset. From this table, we can see that the feature “iso_code” , “location” and “date” are comprehensive.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-transformation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yrz1997/STAT5702-Final-Project-Group-7/edit/main/04-missing.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/yrz1997/STAT5702-Final-Project-Group-7/blob/main/04-missing.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
